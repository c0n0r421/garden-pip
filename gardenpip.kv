# gardenpip.kv
#:import dp kivy.metrics.dp

<MenuScreen>:
    name: 'menu'
    BoxLayout:
        orientation: 'vertical'
        padding: dp(20)
        spacing: dp(20)

        Label:
            text: '[b]Garden Pip Tools[/b]'
            markup: True
            font_size: '32sp'
            size_hint_y: None
            height: self.texture_size[1]

        Button:
            text: '🌿 Nutrient Calculator'
            size_hint_y: None
            height: dp(60)
            font_size: '18sp'
            on_press: root.manager.current = 'nutrient_select'


<NutrientSelectScreen>:
    name: 'nutrient_select'
    BoxLayout:
        orientation: 'vertical'
        padding: dp(20)
        spacing: dp(10)

        Spinner:
            id: manufacturer
            text: 'Select Manufacturer'
            values: []
            size_hint_y: None
            height: dp(60)
            font_size: '18sp'
            on_text: root.on_manufacturer(self.text)

        Spinner:
            id: series
            text: 'Select Series'
            values: []
            size_hint_y: None
            height: dp(60)
            font_size: '18sp'

        Spinner:
            id: calmag
            text: 'Select Cal-Mag'
            values: []
            size_hint_y: None
            height: dp(60)
            font_size: '18sp'

        Button:
            text: 'Next'
            size_hint_y: None
            height: dp(60)
            font_size: '18sp'
            on_press: root.do_next()

        Button:
            text: '← Back to Menu'
            size_hint_y: None
            height: dp(60)
            font_size: '18sp'
            on_press: root.manager.current = 'menu'


<NutrientStageScreen>:
    name: 'nutrient_stage'
    BoxLayout:
        orientation: 'horizontal'
        padding: dp(20)
        spacing: dp(10)

        # ── Left column (inputs & buttons) ───────────────────────────────
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.4
            spacing: dp(10)

            Spinner:
                id: unit
                text: 'metric'
                values: []
                size_hint_y: None
                height: dp(60)
                font_size: '18sp'
                on_text: root.on_unit(self.text)

            TextInput:
                id: volume
                text: ''
                hint_text: 'Volume'
                input_filter: 'float'
                size_hint_y: None
                height: dp(60)
                font_size: '18sp'

            Spinner:
                id: stage
                text: 'Select Stage'
                values: []
                size_hint_y: None
                height: dp(60)
                font_size: '18sp'

            Button:
                text: 'Calculate'
                size_hint_y: None
                height: dp(60)
                font_size: '18sp'
                on_press: root.do_calc()

            BoxLayout:
                size_hint_y: None
                height: dp(60)
                spacing: dp(10)

                Button:
                    text: '← Back'
                    font_size: '18sp'
                    on_press: root.manager.current = 'nutrient_select'

                Button:
                    text: 'Main Menu'
                    font_size: '18sp'
                    on_press: root.manager.current = 'menu'

        # ── Right column (results) ───────────────────────────────────────
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.6
            padding: dp(10)

            Label:
                id: result_lbl
                text: ''
                markup: True
                valign: 'top'
                text_size: self.width, None
                size_hint_y: 1
                font_size: '18sp'

