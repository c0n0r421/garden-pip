# gardenpip.kv
#:import dp kivy.metrics.dp

<Numpad>:
    BoxLayout:
        orientation: 'vertical'
        GridLayout:
            cols: 3
            rows: 4
            spacing: dp(5)
            size_hint_y: None
            height: self.minimum_height
            Button:
                text: '7'
                on_press: root.key_press(self.text)
            Button:
                text: '8'
                on_press: root.key_press(self.text)
            Button:
                text: '9'
                on_press: root.key_press(self.text)
            Button:
                text: '4'
                on_press: root.key_press(self.text)
            Button:
                text: '5'
                on_press: root.key_press(self.text)
            Button:
                text: '6'
                on_press: root.key_press(self.text)
            Button:
                text: '1'
                on_press: root.key_press(self.text)
            Button:
                text: '2'
                on_press: root.key_press(self.text)
            Button:
                text: '3'
                on_press: root.key_press(self.text)
            Button:
                text: '.'
                on_press: root.key_press(self.text)
            Button:
                text: '0'
                on_press: root.key_press(self.text)
            Button:
                text: '\u2190'
                on_press: root.key_press(self.text)
        Button:
            text: 'Enter'
            size_hint_y: None
            height: dp(60)
            on_press: root.key_press(self.text)

<MenuScreen>:
    name: 'menu'
    BoxLayout:
        orientation: 'vertical'
        padding: dp(20)
        spacing: dp(20)

        Label:
            text: '[b]Garden Pip Tools[/b]'
            markup: True
            font_size: '32sp'
            size_hint_y: None
            height: self.texture_size[1]

        Button:
            text: 'üåø Nutrient Calculator'
            size_hint_y: None
            height: dp(60)
            font_size: '18sp'
            on_press: root.manager.current = 'nutrient_select'

        Button:
            text: '\U0001F4D6 Nutrient Log'
            size_hint_y: None
            height: dp(60)
            font_size: '18sp'
            on_press: root.manager.current = 'nutrient_log'

        Button:
            text: 'üóÑ Shelf Layout'
            size_hint_y: None
            height: dp(60)
            font_size: '18sp'
            on_press: root.manager.current = 'shelf_layout'




<NutrientSelectScreen>:
    name: 'nutrient_select'
    BoxLayout:
        orientation: 'vertical'
        padding: dp(20)
        spacing: dp(10)

        Spinner:
            id: manufacturer
            text: 'Select Manufacturer'
            values: []
            size_hint_y: None
            height: dp(60)
            font_size: '18sp'
            on_text: root.on_manufacturer(self.text)

        Spinner:
            id: series
            text: 'Select Series'
            values: []
            size_hint_y: None
            height: dp(60)
            font_size: '18sp'

        Spinner:
            id: calmag
            text: 'Select Cal-Mag'
            values: []
            size_hint_y: None
            height: dp(60)
            font_size: '18sp'

        Button:
            text: 'Next'
            size_hint_y: None
            height: dp(60)
            font_size: '18sp'
            on_press: root.do_next()

        Button:
            text: '‚Üê Back to Menu'
            size_hint_y: None
            height: dp(60)
            font_size: '18sp'
            on_press: root.manager.current = 'menu'


<NutrientStageScreen>:
    name: 'nutrient_stage'
    BoxLayout:
        orientation: 'horizontal'
        padding: dp(20)
        spacing: dp(10)

        # ‚îÄ‚îÄ Left column (inputs & buttons) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.4
            spacing: dp(10)

            Spinner:
                id: unit
                text: 'metric'
                values: []
                size_hint_y: None
                height: dp(60)
                font_size: '18sp'
                on_text: root.on_unit(self.text)

            TextInput:
                id: volume
                text: ''
                hint_text: 'Volume'
                input_filter: 'float'
                on_focus: root.open_numpad(self) if args[1] else None
                size_hint_y: None
                height: dp(60)
                font_size: '18sp'

            Spinner:
                id: stage
                text: 'Select Stage'
                values: []
                size_hint_y: None
                height: dp(60)
                font_size: '18sp'

            Button:
                text: 'Calculate'
                size_hint_y: None
                height: dp(60)
                font_size: '18sp'
                on_press: root.do_calc()

            BoxLayout:
                size_hint_y: None
                height: dp(60)
                spacing: dp(10)

                Button:
                    text: '‚Üê Back'
                    font_size: '18sp'
                    on_press: root.manager.current = 'nutrient_select'

                Button:
                    text: 'Main Menu'
                    font_size: '18sp'
                    on_press: root.manager.current = 'menu'

        # ‚îÄ‚îÄ Right column (results) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.6
            padding: dp(10)

            Label:
                id: result_lbl
                text: ''
                markup: True
                valign: 'top'
                text_size: self.width, None
                size_hint_y: 1
                font_size: '18sp'



<NutrientLogScreen>:
    name: 'nutrient_log'

    BoxLayout:
        orientation: 'vertical'
        padding: dp(20)
        spacing: dp(10)

        TextInput:
            id: search
            hint_text: 'Search logs'
            size_hint_y: None
            height: dp(40)
            on_text: root.on_search(self.text)

        RecycleView:
            id: log_list
            viewclass: 'Button'
            RecycleBoxLayout:
                default_size: None, dp(40)
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height
                orientation: 'vertical'

        BoxLayout:
            size_hint_y: None
            height: dp(60)
            spacing: dp(10)

            Button:
                text: 'Add'
                on_press: root.add_log()

            Button:
                text: 'Back'
                on_press: root.manager.current = 'menu'

<ShelfLayoutScreen>:
    name: 'shelf_layout'

    BoxLayout:
        orientation: 'vertical'
        padding: dp(20)
        spacing: dp(10)

        ScrollView:
            do_scroll_x: False
            BoxLayout:
                id: shelf_box
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                spacing: dp(10)

        Button:
            text: 'Add Shelf'
            size_hint_y: None
            height: dp(50)
            on_press: root.add_shelf()

        Button:
            text: 'Save Layout'
            size_hint_y: None
            height: dp(50)
            on_press: root.save_layout()

        Button:
            text: '\u2190 Back'
            size_hint_y: None
            height: dp(50)
            on_press: root.manager.current = 'menu'

